<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (kappa-library.Kappa_runtime.Instances_sig.S)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">kappa-library</a> &#x00BB; <a href="../../index.html">Kappa_runtime</a> &#x00BB; <a href="../index.html">Instances_sig</a> &#x00BB; S</nav><header class="odoc-preamble"><h1>Module type <code><span>Instances_sig.S</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#updating-the-roots">Updating the roots</a></li><li><a href="#checking-instances">Checking instances</a></li><li><a href="#counting-instances">Counting instances</a></li><li><a href="#picking-instances">Picking instances</a></li><li><a href="#enumerating-instances">Enumerating instances</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-message"><a href="#type-message" class="anchor"></a><code><span><span class="keyword">type</span> message</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-receive_message"><a href="#val-receive_message" class="anchor"></a><code><span><span class="keyword">val</span> receive_message : <span><a href="#type-message">message</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span><a href="../../../Kappa_terms/Model/index.html#type-t">Kappa_terms.Model.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-debug_print"><a href="#val-debug_print" class="anchor"></a><code><span><span class="keyword">val</span> debug_print : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><h3 id="updating-the-roots"><a href="#updating-the-roots" class="anchor"></a>Updating the roots</h3><div class="odoc-spec"><div class="spec value anchored" id="val-incorporate_extra_pattern"><a href="#val-incorporate_extra_pattern" class="anchor"></a><code><span><span class="keyword">val</span> incorporate_extra_pattern : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Kappa_data_structures/IntCollection/index.html#type-t">Kappa_data_structures.IntCollection.t</a> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-break_apart_cc"><a href="#val-break_apart_cc" class="anchor"></a><code><span><span class="keyword">val</span> break_apart_cc : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Kappa_site_graphs/Edges/index.html#type-t">Kappa_site_graphs.Edges.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mod_connectivity_store</span>:<a href="../../Roots/index.html#type-mod_ccs_cache">Roots.mod_ccs_cache</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * int)</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-merge_cc"><a href="#val-merge_cc" class="anchor"></a><code><span><span class="keyword">val</span> merge_cc : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mod_connectivity_store</span>:<a href="../../Roots/index.html#type-mod_ccs_cache">Roots.mod_ccs_cache</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * int)</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-update_roots"><a href="#val-update_roots" class="anchor"></a><code><span><span class="keyword">val</span> update_roots : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Kappa_terms/Pattern/Set/index.html#type-t">Kappa_terms.Pattern.Set.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Kappa_site_graphs/Edges/index.html#type-t">Kappa_site_graphs.Edges.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../Roots/index.html#type-mod_ccs_cache">Roots.mod_ccs_cache</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><h3 id="checking-instances"><a href="#checking-instances" class="anchor"></a>Checking instances</h3><div class="odoc-spec"><div class="spec value anchored" id="val-is_valid"><a href="#val-is_valid" class="anchor"></a><code><span><span class="keyword">val</span> is_valid : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><h3 id="counting-instances"><a href="#counting-instances" class="anchor"></a>Counting instances</h3><div class="odoc-spec"><div class="spec value anchored" id="val-number_of_instances"><a href="#val-number_of_instances" class="anchor"></a><code><span><span class="keyword">val</span> number_of_instances : 
  <span><span class="optlabel">?rule_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> array</span> <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p><code>number_of_instances ?rule_id state patterns</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-number_of_unary_instances_in_cc"><a href="#val-number_of_unary_instances_in_cc" class="anchor"></a><code><span><span class="keyword">val</span> number_of_unary_instances_in_cc : 
  <span><span class="optlabel">?rule_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> * <a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p><code>number_of_unary_instances_in_cc ?rule_id state (pat1, pat2) cc</code></p></div></div><h3 id="picking-instances"><a href="#picking-instances" class="anchor"></a>Picking instances</h3><div class="odoc-spec"><div class="spec value anchored" id="val-pick_unary_instance_in_cc"><a href="#val-pick_unary_instance_in_cc" class="anchor"></a><code><span><span class="keyword">val</span> pick_unary_instance_in_cc : 
  <span><span class="optlabel">?rule_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> * <a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  int * int</span></code></div><div class="spec-doc"><p><code>pick_unary_instance_in_cc state random_state (pat1, pat2) cc</code> Returns a pair of roots corresponding to <code>pat1</code> and <code>pat2</code> respectively. Optimized for currying before the <code>cc</code> argument. In case of failure, one of the resulting roots is set to <code>(-1)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_picked_instance"><a href="#val-fold_picked_instance" class="anchor"></a><code><span><span class="keyword">val</span> fold_picked_instance : 
  <span><span class="optlabel">?rule_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Random.State.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>fold_picked_instances state random_state patterns ~init f</code> with <code>f pat_id_in_array pat corresponding_root acc</code>. Monadic fold function that calls <code>f</code> for every root of a random embedding from <code>patterns</code> in the mixture. This function is lazy in the sense it stops to draw roots when the accumulator besomes `None`.</p></div></div><h3 id="enumerating-instances"><a href="#enumerating-instances" class="anchor"></a>Enumerating instances</h3><div class="odoc-spec"><div class="spec value anchored" id="val-fold_instances"><a href="#val-fold_instances" class="anchor"></a><code><span><span class="keyword">val</span> fold_instances : 
  <span><span class="optlabel">?rule_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?excp</span>:<span>(<a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> array</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>int array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_enumerated_instances state patterns ~init f</code> with <code>f roots acc</code>. Folds through every rectangular instance of an array of patterns.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_unary_instances"><a href="#val-fold_unary_instances" class="anchor"></a><code><span><span class="keyword">val</span> fold_unary_instances : 
  <span><span class="optlabel">?rule_id</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a> * <a href="../../../Kappa_terms/Pattern/index.html#type-id">Kappa_terms.Pattern.id</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span>(int * int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold_unary_instances state (pat1, pat2) ~init f </code> with <code>f (root1, root2) acc</code>.</p></div></div></div></body></html>
